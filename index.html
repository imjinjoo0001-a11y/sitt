<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ ì¢Œì„ ë°°ì¹˜ ì¶”ì²¨ê¸°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* 5. í™”ë©´ì„ ê½‰ ì±„ìš°ëŠ” êµ¬ì„± & 8. ëª¨ë“  ìš”ì†Œë¥¼ í•œ í™”ë©´ ì•ˆì— */
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            height: 100vh; /* ë·°í¬íŠ¸ ë†’ì´ ê½‰ ì±„ìš°ê¸° */
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ë°©ì§€ */
            background-color: #f0f0f0;
        }

        .container {
            width: 95%;
            height: 95vh; /* í™”ë©´ì˜ 95% ë†’ì´ ì‚¬ìš© */
            max-width: 1400px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box; /* íŒ¨ë”©ì´ ì „ì²´ í¬ê¸°ì— í¬í•¨ë˜ë„ë¡ */
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        /* 3. êµíƒ ì˜ì—­ */
        .front-area {
            text-align: center;
            margin: 10px 0 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .podium-icon {
            font-size: 2.5em;
            color: #795548; /* ê°ˆìƒ‰ */
        }
        
        .podium-text {
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
        }

        /* êµì‹¤ ë ˆì´ì•„ì›ƒ (3ê°œ êµ°ë‹¨ ë°°ì¹˜) */
        .class-layout {
            display: flex;
            justify-content: center;
            gap: 20px; /* êµ°ë‹¨ ê°„ê²© ì¤„ì„ */
            width: 100%;
            flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ */
            min-height: 0;
        }

        /* êµ°ë‹¨ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .seat-cluster {
            display: grid;
            gap: 8px; /* ì¢Œì„ ê°„ê²© ì¤„ì„ */
            padding: 10px;
            border-radius: 8px;
            flex-basis: 30%; /* ë¹„ìœ¨ ì¡°ì • */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        /* 9. ê° ëª¨ë‘ ë³„ ìƒ‰ê¹” */
        /* 1ëª¨ë‘ : ì™¼ìª½ êµ°ë‹¨ (2ì—´ 5í–‰) */
        .left-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(5, 1fr);
            background-color: #E8F5E9; /* ì—°í•œ ë…¹ìƒ‰ */
        }

        /* 2ëª¨ë‘ : ì¤‘ì•™ êµ°ë‹¨ (2ì—´ 4í–‰) */
        .center-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            background-color: #E3F2FD; /* ì—°í•œ íŒŒë€ìƒ‰ */
        }

        /* 3ëª¨ë‘ : ì˜¤ë¥¸ìª½ êµ°ë‹¨ (2ì—´ 4í–‰) */
        .right-cluster {
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(4, 1fr);
            background-color: #FFF3E0; /* ì—°í•œ ì£¼í™©ìƒ‰ */
        }
        
        /* 6. ëª¨ë“  ëª¨ë‘ ì˜ ì¹¸ì€ ì‚¬ê°í˜• (ì¢Œì„) */
        .seat {
            width: 100%;
            aspect-ratio: 1 / 1; 
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.4s ease-in-out, transform 0.1s;
        }

        /* ëª¨ë‘ ë³„ ì¢Œì„ ê¸°ë³¸ ìƒ‰ìƒ */
        #left-cluster .seat { background-color: #4CAF50; }
        #center-cluster .seat { background-color: #2196F3; }
        #right-cluster .seat { background-color: #FF9800; }
        
        /* ì¶”ì²¨ ì¤‘ ì„ì‹œ ìƒ‰ìƒ */
        .seat.drawing { background-color: #FFEB3B !important; color: #333; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #drawButton {
            padding: 15px 35px;
            font-size: 1.3em;
            cursor: pointer;
            background-color: #673AB7; /* ë³´ë¼ìƒ‰ */
            color: white;
            border: none;
            border-radius: 10px;
            margin-top: 20px;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 4px 10px rgba(103, 58, 183, 0.4);
            font-weight: bold;
        }
        
        #drawButton:hover {
            background-color: #512DA8;
        }
        
        #drawButton:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* ë¯¸ë””ì–´ ì¿¼ë¦¬: ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
                height: 100vh;
            }
            h1 { font-size: 1.5em; }
            .class-layout {
                flex-direction: column;
                gap: 10px;
                overflow-y: auto; /* ëª¨ë°”ì¼ì—ì„œë§Œ ìŠ¤í¬ë¡¤ í—ˆìš© */
            }
            .seat-cluster {
                width: 95%;
                gap: 5px;
                grid-template-columns: repeat(4, 1fr); /* ëª¨ë°”ì¼ì—ì„œëŠ” ëˆ•í˜€ì„œ 4ì—´ë¡œ */
            }
            .left-cluster {
                grid-template-rows: repeat(3, 1fr); /* 2x5ë¥¼ 4x3ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë ˆì´ì•„ì›ƒ ë³€ê²½ */
            }
            .seat { font-size: 1em; }
            #drawButton {
                padding: 10px 20px;
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ëœë¤ ì¢Œì„ ë°°ì¹˜ ì¶”ì²¨ê¸° ğŸ“Š</h1>
        
        <div class="front-area">
            <i class="fas fa-chalkboard-teacher podium-icon"></i>
            <div class="podium-text">êµíƒ / ì¹ íŒ</div>
        </div>

        <div class="class-layout">
            <div class="seat-cluster left-cluster" id="left-cluster"></div>

            <div class="seat-cluster center-cluster" id="center-cluster"></div>

            <div class="seat-cluster right-cluster" id="right-cluster"></div>
        </div>

        <button id="drawButton">ğŸ‰ ì¶”ì²¨ ì‹œì‘ (26ëª…)</button>
    </div>
    
    <audio id="drumrollSound" src="[YOUR_DRUMROLL_SOUND_URL]" preload="auto"></audio>

    <script>
        // 1. ì¢Œì„ êµ¬ì„± ì •ì˜
        const totalSeats = 26;
        const clusterSpecs = [
            { id: 'left-cluster', count: 10, defaultColor: '#4CAF50' }, 
            { id: 'center-cluster', count: 8, defaultColor: '#2196F3' }, 
            { id: 'right-cluster', count: 8, defaultColor: '#FF9800' }  
        ];
        
        // 2. ë²ˆí˜¸ ë²”ìœ„ ì •ì˜ (1~16, 18, 19~28) -> 26ê°œ ë²ˆí˜¸
        const allPossibleNumbers = Array.from({length: 28}, (_, i) => i + 1);
        // ì œì™¸í•  ë²ˆí˜¸ëŠ” 17ë²ˆ (16 ë‹¤ìŒ, 18 ì´ì „)
        const availableNumbers = allPossibleNumbers.filter(n => n !== 17);

        // DOM ìš”ì†Œ ìºì‹œ
        const drawButton = document.getElementById('drawButton');
        const soundElement = document.getElementById('drumrollSound');

        // ì¢Œì„ div ìƒì„± í•¨ìˆ˜
        function createSeatElements() {
            clusterSpecs.forEach(spec => {
                const clusterEl = document.getElementById(spec.id);
                clusterEl.innerHTML = ''; 
                for (let i = 0; i < spec.count; i++) {
                    const seat = document.createElement('div');
                    seat.className = 'seat';
                    seat.textContent = (i + 1); // ì´ˆê¸° ë²ˆí˜¸ (ìë¦¬ ë²ˆí˜¸ë¡œ í‘œì‹œ)
                    seat.style.backgroundColor = spec.defaultColor; // ê¸°ë³¸ ìƒ‰ìƒ ì ìš©
                    clusterEl.appendChild(seat);
                }
            });
        }
        
        // Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // 2. ì¶”ì²¨ ë° ë°°ì¹˜ í•¨ìˆ˜
        function drawSeats() {
            if (drawButton.disabled) return;
            
            drawButton.disabled = true;
            drawButton.textContent = 'ğŸ¶ ì¶”ì²¨ ì¤‘...';

            // 7. ì‚¬ìš´ë“œ ì¬ìƒ
            if (soundElement) {
                soundElement.play().catch(e => console.log("ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨:", e));
            }
            
            // ë²ˆí˜¸ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ê¸°
            const shuffledNumbers = [...availableNumbers];
            shuffleArray(shuffledNumbers);
            
            let numberIndex = 0;
            const allSeatElements = document.querySelectorAll('.seat');
            
            // ì¶”ì²¨ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ (ì„ íƒëœ ë²ˆí˜¸ë¥¼ ì ì‹œ ê°•ì¡°)
            allSeatElements.forEach(seat => seat.classList.add('drawing'));

            // 3ì´ˆ í›„ ì¶”ì²¨ ê²°ê³¼ë¥¼ í‘œì‹œ
            setTimeout(() => {
                if (soundElement) soundElement.pause();
                
                allSeatElements.forEach((seat, index) => {
                    seat.classList.remove('drawing');
                    if (index < totalSeats) {
                        seat.textContent = shuffledNumbers[index];
                    }
                    // ì›ë˜ ìƒ‰ìƒìœ¼ë¡œ ë³µê·€
                    const clusterId = seat.parentElement.id;
                    const spec = clusterSpecs.find(s => s.id === clusterId);
                    seat.style.backgroundColor = spec.defaultColor; 
                });
                
                drawButton.disabled = false;
                drawButton.textContent = 'ğŸ” ë‹¤ì‹œ ì¶”ì²¨í•˜ê¸°';
            }, 3000); // 3ì´ˆ (ì‚¬ìš´ë“œ ì¬ìƒ ì‹œê°„ ê³ ë ¤)
        }

        // ì´ˆê¸° ì¢Œì„ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        createSeatElements();
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        drawButton.addEventListener('click', drawSeats);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°”ë¡œ ì¶”ì²¨ ì‹¤í–‰
        window.onload = drawSeats;

    </script>
</body>
</html>
